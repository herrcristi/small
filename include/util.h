#pragma once

#include <string>


namespace small
{
    // to lower
    const unsigned char to_lower[] = 
    {
               0,         1,        2,        3,        4,       5,         6,        7,        8,        9,       10,       11,
              12,        13,       14,       15,       16,      17,        18,       19,       20,       21,       22,       23,
              24,        25,       26,       27,       28,      29,        30,       31,  /* */32,  /*!*/33, /*\"*/34,  /*#*/35,
         /*$*/36,   /*%*/37,  /*&*/38, /*\'*/39,  /*(*/40,  /*)*/41,  /***/42,  /*+*/43,  /*,*/44,  /*-*/45,  /*.*/46,  /*/*/47,
         /*0*/48,   /*1*/49,  /*2*/50,  /*3*/51,  /*4*/52,  /*5*/53,  /*6*/54,  /*7*/55,  /*8*/56,  /*9*/57,  /*:*/58,  /*;*/59,
         /*<*/60,   /*=*/61,  /*>*/62,  /*?*/63,  /*@*/64, /*A*/'a', /*B*/'b', /*C*/'c', /*D*/'d', /*E*/'e', /*F*/'f', /*G*/'g',
        /*H*/'h',  /*I*/'i', /*J*/'j', /*K*/'k', /*L*/'l', /*M*/'m', /*N*/'n', /*O*/'o', /*P*/'p', /*Q*/'q', /*R*/'r', /*S*/'s',
        /*T*/'t',  /*U*/'u', /*V*/'v', /*W*/'w', /*X*/'x', /*Y*/'y', /*Z*/'z',  /*[*/91, /*\'*/92,  /*]*/93,  /*^*/94,  /*_*/95,
         /*`*/96,   /*a*/97,  /*b*/98,  /*c*/99, /*d*/100, /*e*/101, /*f*/102, /*g*/103, /*h*/104, /*i*/105, /*j*/106, /*k*/107,
         /*l*/108, /*m*/109, /*n*/110, /*o*/111, /*p*/112, /*q*/113, /*r*/114, /*s*/115, /*t*/116, /*u*/117, /*v*/118, /*w*/119,
         /*x*/120, /*y*/121, /*z*/122, /*{*/123, /*|*/124, /*}*/125, /*~*/126,  /**/127, /*€*/128,  /**/129, /*‚*/130, /*ƒ*/131,
         /*„*/132, /*…*/133, /*†*/134, /*‡*/135, /*ˆ*/136, /*‰*/137,/*Š-š*/154,/*‹*/139,/*Œ-œ*/156, /**/141,/*Ž-ž*/158, /**/143,
          /**/144, /*‘*/145, /*’*/146, /*“*/147, /*”*/148, /*•*/149, /*–*/150, /*—*/151,  /**/152, /*™*/153, /*š*/154, /*›*/155,
         /*œ*/156,  /**/157, /*ž*/158,/*Ÿ-ÿ*/255,/* */160, /*¡*/161, /*¢*/162, /*£*/163, /*¤*/164, /*¥*/165, /*¦*/166, /*§*/167,
         /*¨*/168, /*©*/169, /*ª*/170, /*«*/171, /*¬*/172,  /**/173, /*®*/174, /*¯*/175, /*°*/176, /*±*/177, /*²*/178, /*³*/179,
         /*´*/180, /*µ*/181, /*¶*/182, /*·*/183, /*¸*/184, /*¹*/185, /*º*/186, /*»*/187, /*¼*/188, /*½*/189, /*¾*/190, /*¿*/191,
       /*À-à*/224, /*Á*/225, /*Â*/226, /*Ã*/227, /*Ä*/228, /*Å*/229, /*Æ*/230, /*Ç*/231, /*È*/232, /*É*/233, /*Ê*/234,/*Ë-ë*/235,
       /*Ì-ì*/236, /*Í*/237, /*Î*/238, /*Ï*/239, /*Ð*/240, /*Ñ*/241, /*Ò*/242, /*Ó*/243, /*Ô*/244, /*Õ*/245, /*Ö*/246, /*×*/215,
       /*Ø-ø*/248, /*Ù*/249, /*Ú*/250, /*Û*/251, /*Ü*/252, /*Ý*/253,/*Þ-þ*/254,/*ß*/223, /*à*/224, /*á*/225, /*â*/226, /*ã*/227,
         /*ä*/228, /*å*/229, /*æ*/230, /*ç*/231, /*è*/232, /*é*/233, /*ê*/234, /*ë*/235, /*ì*/236, /*í*/237, /*î*/238, /*ï*/239,
         /*ð*/240, /*ñ*/241, /*ò*/242, /*ó*/243, /*ô*/244, /*õ*/245, /*ö*/246, /*÷*/247, /*ø*/248, /*ù*/249, /*ú*/250, /*û*/251,
         /*ü*/252, /*ý*/253, /*þ*/254, /*ÿ*/255
    };


    // stricmp without locale
    inline int          stricmp                     ( const char* dst, const char* src )
    {
        int f = 0, l = 0;
        do
        {
            if ( ((f = (unsigned char)(*(dst++))) >= 'A') && (f <= 'Z') )
                f += 'a' - 'A';
            if ( ((l = (unsigned char)(*(src++))) >= 'A') && (l <= 'Z') )
                l += 'a' - 'A';
        } while ( f && (f == l) );

        return(f - l);
    }

    // insensitive compare
    struct icasecmp
    {
        inline bool     operator()                  ( const std::string& a, const std::string& b ) const
        {
            return small::stricmp( a.c_str(), b.c_str() ) < 0;
        }
    };


}

